[{"path":"https://s3alfisc.github.io/summclust/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 summclust authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://s3alfisc.github.io/summclust/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Alexander Fischer. Author, maintainer.","code":""},{"path":"https://s3alfisc.github.io/summclust/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Fischer (2022). summclust: Module Cluster Specific Information Cluster Jackknife. R package version 0.2, https://s3alfisc.github.io/summclust/.","code":"@Manual{,   title = {summclust: Module for Cluster Specific Information and Cluster Jackknife},   author = {Alexander Fischer},   year = {2022},   note = {R package version 0.2},   url = {https://s3alfisc.github.io/summclust/}, }"},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"summclust","dir":"","previous_headings":"","what":"Module for Cluster Specific Information and Cluster Jackknife ","title":"Module for Cluster Specific Information and Cluster Jackknife ","text":"R module cluster level measures leverage, influence, cluster jackknife variance estimator. detailed description implemented methods, see: MacKinnon, J.G., Nielsen, M.Ø., Webb, M.D., 2022. Leverage, influence, jackknife clustered regression models: Reliable inference using summclust. QED Working Paper 1483. Queen’s University. Stata version package, see .","code":""},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Module for Cluster Specific Information and Cluster Jackknife ","text":"can install development version summclust GitHub r-universe :","code":"# from r-universe (windows & mac, compiled R > 4.0 required) install.packages('summclust', repos ='https://s3alfisc.r-universe.dev')  # install.packages(\"devtools\") devtools::install_github(\"s3alfisc/summclust\")"},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"using-summclust","dir":"","previous_headings":"","what":"Using summclust","title":"Module for Cluster Specific Information and Cluster Jackknife ","text":"visually inspect leverage statistics, use plot method","code":"library(summclust) library(lmtest) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ as.factor(grade) + as.factor(age) + as.factor(birth_yr) + union +  race + msp,   data = nlswork)  summclust_res <- summclust(   obj = lm_fit,   cluster = ~ind_code,   type = \"CRV3\")  # CRV3-based inference - exactly matches output of summclust-stata coeftable(summclust_res, param = c(\"msp\", \"union\")) #>             coef     tstat         se      p_val  conf_int_l  conf_int_u #> union  0.2039597  2.440122 0.08358587 0.03281561  0.01998847 0.387930980 #> msp   -0.0275151 -1.956404 0.01406412 0.07628064 -0.05847002 0.003439815  summary(summclust_res, param = c(\"msp\",\"union\")) #>             coef     tstat         se      p_val  conf_int_l  conf_int_u #> union  0.2039597  2.440122 0.08358587 0.03281561  0.01998847 0.387930980 #> msp   -0.0275151 -1.956404 0.01406412 0.07628064 -0.05847002 0.003439815 #>   #>            leverage partial-leverage-msp partial-leverage-union    beta-msp #> Min.     0.09332052          0.001622359           0.0006662968 -0.03320040 #> 1st Qu.  0.70440923          0.009133996           0.0048899422 -0.02893131 #> Median   3.51549151          0.056682344           0.0379535242 -0.02776470 #> Mean     5.41666667          0.083333333           0.0833333333 -0.02691999 #> 3rd Qu.  6.41132962          0.106083114           0.1004277711 -0.02610221 #> Max.    20.28918187          0.312994532           0.3597669210 -0.01583453 #>         beta-union #> Min.     0.1624754 #> 1st Qu.  0.1994694 #> Median   0.2045197 #> Mean     0.2053997 #> 3rd Qu.  0.2056569 #> Max.     0.2754228 plot(summclust_res, param = c(\"msp\",\"union\")) #> $residual_leverage #>  #> $coef_leverage #>  #> $coef_beta"},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"using-summclust-with-coefplot-and-fixest","dir":"","previous_headings":"","what":"Using summclust with coefplot and fixest","title":"Module for Cluster Specific Information and Cluster Jackknife ","text":"Note can also use CVR3 CRV3J covariance matrices computed via summclust lmtest() fixest packages. p-value confidence intervals fixest::coeftable() differ lmtest::coeftest() summclust::coeftable(). due fact fixest::coeftable() uses different degree freedom t-distribution used calculation (believe uses t(N-1)).","code":"library(lmtest) library(fixest)  df <- length(summclust_res$cluster) - 1  # with lmtest CRV1 <- coeftest(lm_fit, sandwich::vcovCL(lm_fit, ~ind_code), df = df) CRV3 <- coeftest(lm_fit, summclust_res$vcov, df = df)  CRV1[c(\"union\", \"race\", \"msp\"),] #>          Estimate  Std. Error   t value     Pr(>|t|) #> union  0.20395972 0.061167499  3.334446 0.0066585766 #> race  -0.08619813 0.016150418 -5.337207 0.0002384275 #> msp   -0.02751510 0.009293046 -2.960827 0.0129561148 CRV3[c(\"union\", \"race\", \"msp\"),] #>          Estimate Std. Error   t value    Pr(>|t|) #> union  0.20395972 0.08358587  2.440122 0.032815614 #> race  -0.08619813 0.01904684 -4.525586 0.000864074 #> msp   -0.02751510 0.01406412 -1.956404 0.076280639  confint(CRV1)[c(\"union\", \"race\", \"msp\"),] #>             2.5 %       97.5 % #> union  0.06933097  0.338588481 #> race  -0.12174496 -0.050651302 #> msp   -0.04796896 -0.007061245 confint(CRV3)[c(\"union\", \"race\", \"msp\"),] #>             2.5 %       97.5 % #> union  0.01998847  0.387930980 #> race  -0.12811995 -0.044276312 #> msp   -0.05847002  0.003439815  # with fixest feols_fit <- feols(   ln_wage ~ as.factor(grade) + as.factor(age) + as.factor(birth_yr) + union +  race + msp,   data = nlswork)  fixest::coeftable(   feols_fit,   vcov = summclust_res$vcov,   ssc = ssc(adj = FALSE, cluster.adj = FALSE) )[c(\"msp\", \"union\", \"race\"),] #>          Estimate Std. Error   t value     Pr(>|t|) #> msp   -0.02751510 0.01406412 -1.956404 5.043213e-02 #> union  0.20395972 0.08358587  2.440122 1.469134e-02 #> race  -0.08619813 0.01904684 -4.525586 6.059226e-06"},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.html","id":null,"dir":"Reference","previous_headings":"","what":"Inference based on CRV3 and CRV3J estimates — coeftable","title":"Inference based on CRV3 and CRV3J estimates — coeftable","text":"Inference based CRV3 CRV3J estimates","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Inference based on CRV3 and CRV3J estimates — coeftable","text":"","code":"coeftable(obj, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Inference based on CRV3 and CRV3J estimates — coeftable","text":"obj object class summclust ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"Differences between lmtest::coeftest() and summclust\nto compute pvalues and confidence intervals, coeftable() uses\na t(G-1) distribution\nsummclust uses tstat with different df, different p-val type — coeftable.summclust","title":"Differences between lmtest::coeftest() and summclust\nto compute pvalues and confidence intervals, coeftable() uses\na t(G-1) distribution\nsummclust uses tstat with different df, different p-val type — coeftable.summclust","text":"Differences lmtest::coeftest() summclust compute pvalues confidence intervals, coeftable() uses t(G-1) distribution summclust uses tstat different df, different p-val type","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Differences between lmtest::coeftest() and summclust\nto compute pvalues and confidence intervals, coeftable() uses\na t(G-1) distribution\nsummclust uses tstat with different df, different p-val type — coeftable.summclust","text":"","code":"# S3 method for summclust coeftable(obj, ..., param)"},{"path":"https://s3alfisc.github.io/summclust/reference/coeftable.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Differences between lmtest::coeftest() and summclust\nto compute pvalues and confidence intervals, coeftable() uses\na t(G-1) distribution\nsummclust uses tstat with different df, different p-val type — coeftable.summclust","text":"obj object class 'summclust' ... arguments param character vector","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.fixest.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced model.matrix for objects of type fixest — model_matrix.fixest","title":"Enhanced model.matrix for objects of type fixest — model_matrix.fixest","text":"Enhanced model.matrix objects type fixest","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.fixest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enhanced model.matrix for objects of type fixest — model_matrix.fixest","text":"","code":"# S3 method for fixest model_matrix(object, type, collin.rm = TRUE, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.fixest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enhanced model.matrix for objects of type fixest — model_matrix.fixest","text":"object object class fixest type rhs lhs fixef collin.rm collinear variables dropped? ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"enhanced model.matrix functionalities — model_matrix","title":"enhanced model.matrix functionalities — model_matrix","text":"enhanced model.matrix functionalities","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"enhanced model.matrix functionalities — model_matrix","text":"","code":"model_matrix(object, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"enhanced model.matrix functionalities — model_matrix","text":"object object class lm `felm`` ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.lm.html","id":null,"dir":"Reference","previous_headings":"","what":"Enhanced model.matrix for objects of type lm — model_matrix.lm","title":"Enhanced model.matrix for objects of type lm — model_matrix.lm","text":"Enhanced model.matrix objects type lm","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.lm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Enhanced model.matrix for objects of type lm — model_matrix.lm","text":"","code":"# S3 method for lm model_matrix(object, collin.rm = TRUE, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/model_matrix.lm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Enhanced model.matrix for objects of type lm — model_matrix.lm","text":"object object class lm collin.rm collinear variables dropped? ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"autoplot method for summclust xs — plot.summclust","title":"autoplot method for summclust xs — plot.summclust","text":"autoplot method summclust xs","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"autoplot method for summclust xs — plot.summclust","text":"","code":"# S3 method for summclust plot(x, ..., param)"},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"autoplot method for summclust xs — plot.summclust","text":"x x type summclust ... optional function arguments param Character vector. parameters plotted?","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"summary() method for objects of type summclust — summary.summclust","title":"summary() method for objects of type summclust — summary.summclust","text":"summary() method objects type summclust","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"summary() method for objects of type summclust — summary.summclust","text":"","code":"# S3 method for summclust summary(object, ..., param)"},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"summary() method for objects of type summclust — summary.summclust","text":"object objet type summclust ... misc arguments param Character vector. parameters summarized","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.fixest","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.fixest","text":"Compute CR3 Jackknive variance covariance matrices objects type fixest","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.fixest","text":"","code":"# S3 method for fixest summclust(obj, cluster, absorb_cluster_fixef = TRUE, type, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.fixest","text":"obj object type fixest cluster clustering vector absorb_cluster_fixef TRUE default. cluster fixed effects projected ? increases numerical stability. type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.fixest","text":"","code":"if (FALSE) { library(summclust) library(fixest) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  feols_fit <- feols(   ln_wage ~ union +  race + msp | birth_yr + age + grade,   data = nlswork,   cluster = ~ind_code) }"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute leverage statistics for clustered inference — summclust","title":"Compute leverage statistics for clustered inference — summclust","text":"Compute leverage statistics clustered inference","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute leverage statistics for clustered inference — summclust","text":"","code":"summclust(obj, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute leverage statistics for clustered inference — summclust","text":"obj object class lm fixest ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.lm","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.lm","text":"Compute CR3 Jackknive variance covariance matrices objects type fixest","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.lm","text":"","code":"# S3 method for lm summclust(obj, cluster, type, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.lm","text":"obj object type lm cluster clustering vector type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CR3 Jackknive variance covariance matrices of objects of type fixest — summclust.lm","text":"","code":"if (FALSE) { library(summclust) library(fixest) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  summclust(lm_fit) }"}]
